#DESCRIPTION
# function compositions
#ENDDESCRIPTION
## Edited K. Lesh, Union College, 7/14/03
#KEYWORDS('composition', 'function')

DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
   "PG.pl",
   "PGbasicmacros.pl",
   "PGchoicemacros.pl",
   "PGanswermacros.pl",
   "PGauxiliaryFunctions.pl",
   "PGunion.pl",        # Union College utilities
   "compositionAnswer.pl", 
                        # Load answer-checker appropriate to the problem
   "PGcourse.pl",       # Customization file for the course
);

DOCUMENT();        # This should be the first executable line in the problem.

TEXT(beginproblem());
BEGIN_PROBLEM();

$showPartialCorrectAnswers = 0;

##################################################

$a = random(2,9,1);
$b = non_zero_random(-6,6,1);

#
#  for limits in function compare (avoids division by sero or roots of
#  negatives).
#

$m0 = abs($b)+.1;
$m1 = sqrt(abs($b)/$a)+.1;

#
#  List function compositions as ["f","g","f(g)"].
#  The f(g) should be in TeX form for display, but
#  the others formatted for the answer checker.
#  (The answer is given in its two parts so that
#  if the student requests answers, it can give them.)
#  You can also give optional parameters, like the limits
#  in several of the functions below.
#

$linear = FPOLY("${a}x+$b");
$quadratic = FPOLY("${a}x^2-$b");
@flist = (
  ["sin(x)","$linear","\sin($linear)"],
  ["sin(x)","${a}x^2","\sin(${a}x^2)"],
  ["sqrt(x)","$quadratic","\sqrt{$quadratic}",limits=>[$m1,$m1+1]],
  ["1/x","$linear","\frac{1}{$linear}",limits=>[$m0,$m0+1]],
  ["cos(x)","$linear","\cos($linear)"],
  ["sqrt(x)","$linear","\sqrt{$linear}",limits=>[$m0,$m0+1]]
);

#
#  Get a random function from the list
#
$i = random(0,$#flist,1);
($f,$g,$fog,%params) = @{$flist[$i]};

#
#  Write out the problem text
#
BEGIN_TEXT
  The function \(h(x) = $fog\) can be written as a composition
  \(f(g(x))\) where
  $PAR
  \(f(x)\) = \{ans_rule(20)\} and \(g(x)\) = \{ans_rule(20)\}.
  $PAR
  Do not use the identity function as one of your answers. That is, do 
  not use  \(f(x)=x\) or  \(g(x)=x\).
END_TEXT

#
#  Specify the answer
#
COMPOSITION_ANS($f,$g,%params);
install_problem_grader(~~&std_problem_grader);  # all answers must be correct

##################################################

END_PROBLEM();
ENDDOCUMENT();        # This should be the last executable line in the problem.
