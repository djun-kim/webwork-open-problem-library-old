#Edited by K. Lesh, Union College, 9/11/03

DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
  "PG.pl",
  "PGbasicmacros.pl",
  "PGchoicemacros.pl",
  "PGanswermacros.pl",
  "PGgraphmacros.pl",
  "PGauxiliaryFunctions.pl",
  "alignedChoice.pl",
  "PGunion.pl",
  "PGcourse.pl"
);

TEXT(beginproblem());
BEGIN_PROBLEM();
#################################################

$a=random(-3,3,1);
$b=random(-2,3,1);
$c=random(-3,2,1);
$m1=random(-1,1,0.5);
$m2=($b - $a)/2;
$m3=($c - $b - 1)/2;
$m4=random(-1,1,0.5);

$ap1 = 1 + $a;
$bp1 = 1 + $b;


$fc = "red";
$f1 = FEQ("${m1}*(x+1)+$a for x in [-2,-1) using color=$fc and weight=2");
$f2 = FEQ("${m2}*(x-1)+$b for x in (-1,1) using color=$fc and weight=2");
$f3 = FEQ("${m3}*(x-3)+$c for x in [1,3) using color=$fc and weight=2");
$f4 = FEQ("1+$a for x in [-1,-1] using color=$fc and weight=2");
$f5 = FEQ("${m4}*(x-3)+$c for x in (3,4] using color=$fc and weight=2");

$graph = init_graph(-3,-6,5,6,axes=>[0,0],grid=>[8,12],size=>[300,300]);

($f1Ref,$f2Ref,$f3Ref,$f4Ref,$f5Ref) = 
  plot_functions($graph,$f1,$f2,$f3,$f4,$f5);

#
#  Use an alignment to present the questions and answer rules
#
$alignment = new_aligned_list(equals=>1, numbered=>1, ans_rule_len=>4);
$alignment->qa(
  '\(\displaystyle\lim_{x\to -1^-} F(x)\)', num_cmp($a, strings=>['DNE']),
  '\(\displaystyle\lim_{x\to -1^+} F(x)\)', num_cmp($a, strings=>['DNE']),
  '\(\displaystyle\lim_{x\to -1} F(x)\)',   num_cmp($a, strings=>['DNE']),
  '\(F(-1)\)',                              num_cmp($ap1, strings=>['DNE']),
  '\(\displaystyle\lim_{x\to 1^-} F(x)\)',  num_cmp($b, strings=>['DNE']),
  '\(\displaystyle\lim_{x\to 1^+} F(x)\)',  num_cmp($bp1, strings=>['DNE']),
  '\(\displaystyle\lim_{x\to 1} F(x)\)',    num_cmp('DNE', strings=>['DNE']),
  '\(\displaystyle\lim_{x \to 3} F(x)\)',   num_cmp($c, strings=>['DNE']),
  '\(F(3)\)',                               num_cmp('DNE', strings=>['DNE'])
);

##################################################

BEGIN_TEXT
  $PAR
  Let \(F\) be the function whose graph is shown below.
  $PAR
  Evaluate each of the following expressions.
  $PAR
  (${BITALIC}Enter ${LQ}DNE${RQ} if the limit does not exist or
  is not defined.${EITALIC})
  $PAR
END_TEXT

#
#  Put the questions in a column on the left, and the
#  graph in a column on the right.
#
TEXT(EV2(
  ColumnTable(
     $alignment->print_q.
    "$PAR",

    $BCENTER.$BR.
    image(insertGraph($graph),width=>300,height=>300,tex_size=>480).
    $BR."The graph of \(y=F(x)\).".
    $ECENTER,

    indent => 0, valign=>"TOP")
));

$showPartialCorrectAnswers = 1;

ANS($alignment->correct_ans);

##################################################
END_PROBLEM();
ENDDOCUMENT();        # This should be the last executable line in the problem.

