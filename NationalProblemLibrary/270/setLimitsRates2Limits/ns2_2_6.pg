## DESCRIPTION
##   Continuity Graphically
## ENDDESCRIPTION

## KEYWORDS('graphical', 'continuity','calculus', 'limits')
## Tagged by nhamblet

## DBsubject('Calculus')
## DBchapter('Limits and Derivatives')
## DBsection('Continuity')
## Date('')
## Author('')
## Institution('')
## TitleText1('')
## EditionText1('')
## AuthorText1('')
## Section1('')
## Problem1('')

DOCUMENT();

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           'PGgraphmacros.pl',
           "PGnumericalmacros.pl",
           ); 


# define function1 to be evaluated

@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,3,0,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f1 = $herm -> rf_f;

@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,-3, -2,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f2 = $herm -> rf_f;

# define function3 to be evaluated
@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,0,-1,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f3 = $herm -> rf_f;



$llimit = -5; $rlimit = 5;
$del = .05;
$x0=random($llimit+$del,$rlimit-$del , .01);

#  Calculate the cubic spline approximation

$graph = init_graph($llimit, $llimit, $rlimit, $rlimit,axes => [0,0],grid =>[10,10]);
my ($left_rule, $value_rule, $right_rule) = ($f1, $f2,$f3)[NchooseK(3,3)];

my ($left_fun) = new Fun($left_rule, $graph);
$left_fun ->domain($llimit, $x0);
$left_fun ->color('red');


my ($right_fun) = new Fun($right_rule, $graph);
$right_fun ->domain($rlimit, $x0);
$right_fun ->color('red');

$graph->stamps(open_circle($x0, $left_fun->rule->($x0), 'red') );
$graph->stamps(open_circle($x0, $right_fun->rule->($x0), 'red') );
# the closed circle needs to printed last.
$graph->stamps( closed_circle($x0 , &$value_rule($x0) , 'red' )  ) ;
$left_limit  = $left_fun->rule->($x0);
$value       = &$value_rule($x0)  ; 
$right_limit = $right_fun->rule->($x0);


TEXT(beginproblem());


BEGIN_TEXT
Let \(f\) be the function below.
$BR$BR
\{ image(insertGraph($graph) ) \}
$BR
$BBOLD Note: $EBOLD you can click on the graph to get a larger image.

$BR$BR
Determine the limits for the function \( f\) at  \($x0\).
$BR$BR
\( \displaystyle \lim_{x\to $x0^{-} } f(x) \) = \{ans_rule(10)\}
$BR
$BR
\( f($x0) \)   = \{ ans_rule(10) \}
$BR
$BR
\( \displaystyle \lim_{x\to $x0^{+}  } f(x) \) = \{ ans_rule(10) \}
$BR
$BR
Is this function continuous at \($x0\)?: (Y or N) \{ ans_rule(6) \}$BR
Can this function be made continuous by changing its value 
at \($x0 \)?: (Y or N) \{ ans_rule(6) \}
END_TEXT

$answer_tol = ($rlimit-$llimit)/10;
$continuousQ = 'N';
$continuousQ = 'Y' if (abs($left_limit - $value) < $answer_tol and abs($value - $right_limit) < $answer_tol);
$madeContinuousQ = 'N';
$madeContinuousQ = 'Y' if (abs($left_limit - $right_limit) < $answer_tol);




ANS(num_cmp([ $left_limit,$value,$right_limit ], tol => $answer_tol ) ,str_cmp([$continuousQ,$madeContinuousQ]));  #We are allowing 1 percent error for the answer.

			
&ENDDOCUMENT;

