##DESCRIPTION
##  Operations on functions--Function notation
## 
##ENDDESCRIPTION
## DBsubject('Intermediate Algebra')
## DBchapter('Ch 02: Functions and Linear Functions')
## DBsection('The Algebra of Functions')
## KEYWORDS('function operations')
## TitleText1('Essentials of Intermediate Algebra')
## EditionText1('1')
## AuthorText1('Blitzer')
## Section1('2.2')
## Problem1('')
## Author('RA Cruz')
## Institution('The College of Idaho')
## Date: 2007/09

DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
  "PGstandard.pl",
  "MathObjects.pl",
  "PGaciRemoveCommas.pl"
#  "aciBigNumbers.pl"
);

sub Picky_function_cmp {
   my $ans = shift;
   my @variables = @_;
   my $evaluator = fun_cmp($ans,var=>[@variables]);
   
   my $new_evaluator = sub
        {
   my $student_ans = shift;
   my $format_student = $student_ans;
   $format_student =~ s/ //g;  #remove spaces 

   my $ans_hash = $evaluator->evaluate($format_student);
   if ($format_student !~ /[(][a-zA-Z][+-][a-zA-Z][)][(][0-9]+[\)]/
    && $format_student !~ /([a-zA-Z][(][0-9]+[)][+-][a-zA-Z][(][0-9]+[)])/)
      {
      $ans_hash->{score}=0;
      $ans_hash->setKeys( 'ans_message'=> "Use correct function notation");
      }
   $ans_hash->{original_student_ans}="$student_ans";
   $ans_hash->{preview_latex_string}="$student_ans";
   $ans_hash->{student_ans} = "$student_ans";
    
   return $ans_hash;
	};

	return $new_evaluator;

}


TEXT(beginproblem);

######################################
#  Setup

#Context("BigNumbers");   

$yr0 = 1995;
@year = ($yt0,$yt0+1,$yt0+2,$yt0+3,$yt0+4,$yt0+5,$yt0+6,$yt0+7);
@births = (3899589,3891494,3880894,3941553,3959417,4058814,4025933,4022000);
@deaths = (2312132,2314690,2314245,2337256,2391399,2403351,2416351,2436000);

$x = random(1,7,1);  
$year = 1995 + $x;

######################################
#  Main text

BEGIN_TEXT
$BCENTER
$BBOLD Births and Deaths in the U.S. $EBOLD
\{begintable(3)\}
\{row( 'Year',  'Births', 'Deaths' ) \}
\{row( 1995, '3,899,589', '2,312,132') \}
\{row( 1996, '3,891,494', '2,314,690') \}
\{row( 1997, '3,880,894', '2,314,245') \}
\{row( 1998, '3,941,553', '2,337,256') \}
\{row( 1999, '3,959,417', '2,391,399') \}
\{row( 2000, '4,058,814', '2,403,351') \}
\{row( 2001, '4,025,933', '2,416,351') \}
\{row( 2002, '4,022,000', '2,436,000') \}
\{endtable()\}
$ECENTER
$BR
The table shows the total number of births and 
deaths in the United States from 1995 to 2002.
Let \( B(x) \) be a function which models the number 
of births and let \( D(x) \) be a function which
models the number of deaths for these years.  In
each function, \(x\), represents the number of
years after 1995, i.e. \(x=0\) represents 1995.  
$PAR
a) In $year, if we ignore immigration numbers,
the population of the U.S. \{ans_rule(20)\} (Enter:
INCREASED or DECREASED) by \{ans_rule(20)\}.
$PAR
b) Write the formula for finding this quantity: \{ans_rule(20)\}
END_TEXT

######################################
#  Answer

Context()->strings->add("INCREASED"=>{},
                        "DECREASED"=>{} );

$change = $births[$x] - $deaths[$x];

$ans_a1 = String("INCREASED");
if ($change<0) {$ans_a1 = String("DECREASED");}
ANS($ans_a1->cmp);

$ans_a2 = abs($change);
ANS(removeCommas($ans_a2));

#Context()->variables->add(B=>'Real',
#                          D=>'Real');

#$ans_b = Formula("(B - D)($x)");  #This takes out the parens about the $x
$ans_b = "(B - D)($x)";
ANS(Picky_function_cmp($ans_b,"B","D"));

$showPartialCorrectAnswers = 1;

######################################

ENDDOCUMENT(); # This should be the last executable line in the problem.
