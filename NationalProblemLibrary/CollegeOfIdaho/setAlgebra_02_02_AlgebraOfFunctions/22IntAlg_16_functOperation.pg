##DESCRIPTION
##  Operations on functions--Function notation
##  NEEDS WORK: How to ask the questions. Notation checker needs to be
##              more robust.
##ENDDESCRIPTION
## DBsubject('Intermediate Algebra')
## DBchapter('Ch 02: Functions and Linear Functions')
## DBsection('The Algebra of Functions')
## KEYWORDS('function operations')
## TitleText1('Essentials of Intermediate Algebra')
## EditionText1('1')
## AuthorText1('Blitzer')
## Section1('2.2')
## Problem1('')
## Author('RA Cruz')
## Institution('The College of Idaho')
## Date: 2007/09

DOCUMENT();        # This should be the first executable line in the problem.

loadMacros(
  "PGstandard.pl",
  "MathObjects.pl"
);

sub Picky_function_cmp {
   my $ans = shift;
   my @variables = @_;
   my $evaluator = fun_cmp($ans,var=>[@variables]);
   
   my $new_evaluator = sub
        {
   my $student_ans = shift;
   my $format_student = $student_ans;
   $format_student =~ s/ //g;  #remove spaces 

   my $ans_hash = $evaluator->evaluate($format_student);
   if ($format_student !~ /[(][a-zA-Z][+-][a-zA-Z][)][(][0-9]+[\)]/
    && $format_student !~ /([a-zA-Z][(][0-9]+[)][+-][a-zA-Z][(][0-9]+[)])/)
      {
      $ans_hash->{score}=0;
      $ans_hash->setKeys( 'ans_message'=> "Use correct function notation");
      }
   $ans_hash->{original_student_ans}="$student_ans";
   $ans_hash->{preview_latex_string}="$student_ans";
   $ans_hash->{student_ans} = "$student_ans";
    
   return $ans_hash;
	};

	return $new_evaluator;

}


TEXT(beginproblem);

######################################
#  Setup

$x = random(1,7,1);  
$year = 1995 + $x;

######################################
#  Main text

BEGIN_TEXT
A company that sells radios has hearly fixed costs of --.  
It costs the company -- to produce each radio.  Each radio 
will sell for --.  The company's costs and revenue are 
modeled by the following functions: 
$PAR
NOTE:  Ask for cost, revenue in function notation: $BITALIC
if it costs 1000 to make 50 radios express this in functcional
notation. $EITALIC (Something like this.
$PAR
Write the formula for finding the profit: \{ans_rule(20)\}
END_TEXT

######################################
#  Answer

#Context()->variables->add(C=>'Real',
#                          R=>'Real');

#$ans_b = Formula("(R - C)($x)");  #This takes out the parens about the $x
$ans_b = "(R - C)($x)";
ANS(Picky_function_cmp($ans_b,"C","R"));

$showPartialCorrectAnswers = 1;

######################################

ENDDOCUMENT(); # This should be the last executable line in the problem.
