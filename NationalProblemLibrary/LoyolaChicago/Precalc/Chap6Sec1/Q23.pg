# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Trigonometric Functions')
## DBsection('Introduction to Periodic Functions')
## KEYWORDS('periodic','period','amplitude','midline','spring')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('6.1')
## Problem1('23')
## Author('Adam Spiegler')
## Institution('Loyola University Chicago')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "PGgraphmacros.pl",
           "PGauxiliaryFunctions.pl",
           "PGgraphmacros.pl"
           );
       
TEXT(beginproblem()); # standard preamble to each problem.


$showPartialCorrectAnswers = 1;

# include javascript for pop-up explaining units
HEADER_TEXT(<<EOF);
<script language="javascript" type="text/javascript">
<!-- //
function unitspopup() {
    var url = "/webwork2_files/units.html";
    var opt = "height=625,width=600,location=no,menubar=no,status=no" +
              "resizable=yes,scrollbars=yes,toolbar=no,";
    window.open(url,'examdata_info',opt).focus();
}
// -->
</script>
EOF


$a = random(2,8,1);
$m = random($a+2,$a+8,1);
$b = random(0.5,2,0.5);
@perm = shuffle(3);
$ymax = $m+$a + ($m+$a)/5;
$ymin = -($m+$a)/10;

# we graph the function $m +/- $a sin(2pi*$b x) or cosine
#$f[0] = "$m + $a sin(2*pi*x) for x in <0,3> using color:blue and weight:2"; 
$f[0] = "$m - $a sin(2*pi*x) for x in <0,3> using color:blue and weight:2";
$f[1] = "$m + $a cos(2*pi*x) for x in <0,3> using color:blue and weight:2";
$f[2] = "$m - $a cos(2*pi*x) for x in <0,3> using color:blue and weight:2";


$mid = "$m for x in <0,3> using color:gray and weight:1";
$top = "$m+$a for x in <0,.1> using color:black and weight:1";
$bot = "$m-$a for x in <0,.1> using color:black and weight:1";

$graph[0] = init_graph(-.4,$ymin,3.25,$ymax,'axes'=>[0,0]);
$graph[0]->lb('reset');
$graph[0]->lb(new Label(1,-($m+$a)/40,$b,'black','center','top'));
$graph[0]->lb(new Label(2,-($m+$a)/40,2*$b,'black','center','top'));
$graph[0]->lb(new Label(3,-.5,3*$b,'black','center','top'));
$graph[0]->lb(new Label(1.5,-($m+$a)/20,"t (sec)",'black','center','top'));

$graph[0]->lb(new Label(.02,$ymax-($m+$a)/20,"d (cm)",'black','left','top'));
$graph[0]->lb(new Label(-.1,$m+$a,$m+$a,'black','right','middle'));
$graph[0]->lb(new Label(-.1,$m,$m,'black','right','middle'));
$graph[0]->lb(new Label(-.1,$m-$a,$m-$a,'black','right','middle'));
for ($i = 1; $i<=3; $i++) {
     $graph[0]->moveTo($i,0); 
     $graph[0]->lineTo($i,$ymax,'black') };
plot_functions( $graph[0], $f[$perm[0]], $mid, $top, $bot);
$fig = image(insertGraph($graph[0]),width =>300,height =>250,'tex_size'=>500);

@state = ("None of the above",
          "The weight starts closest to the floor and begins by bouncing up 
           towards the ceiling.",
          "The weight starts closest to the ceiling and begins by stretching 
           the spring down towards the floor.");
@state = @state[@perm];
$state[3] = "The spring starts at its average distance between the ceiling and 
           floor and begins by stretching the spring down towards the floor.";

######################################
$mc = new_multiple_choice();
$mc->qa("Based on the graph of \( d =f(t) \) above, which of the statements
         below correctly describes the motion of the weight as it bobs up and 
         down?",
        $state[0]);
$mc->extra($state[1],$state[2],$state[3]);
$mc->makeLast("None of the above");

BEGIN_TEXT
Question 23:
$BR
$SPACE
$BR
A weight is suspended from the ceiling by a spring.  Let $BITALIC d $EITALIC be the distance in centimeters from the ceiling to the weight.  When the weight is motionless, $SPACE \( d = $m \). $SPACE If the weight is disturbed, it begins to bob up and down, or $BITALIC oscillate${EITALIC}.  Then $BITALIC d $EITALIC is a periodic function of $BITALIC t${EITALIC}, time in seconds, so $SPACE \( d = f(t) \).  Consider the graph of $SPACE \( d = f(t) \) $SPACE below which represents the distance of the weight from the ceiling at time $BITALIC t${EITALIC}.
$BR
$BCENTER
$fig
$ECENTER
$BR
$SPACE
$BR
a) \{ $mc->print_q() \} $BR
\{ $mc->print_a() \}
$BR $SPACE $BR
b) How long does it take the weight to bounce completely up and down (or down and up) and return to its starting position? $SPACE $SPACE \{ ans_rule(10) \} (include \{ htmlLink("javascript:unitspopup()","units") \})
$BR
$SPACE
$BR
c) What is the closest the weight gets to the ceiling? $SPACE $SPACE \{ ans_rule(10) \} (include \{ htmlLink("javascript:unitspopup()","units") \})
$BR
$SPACE
$BR
d) What is the furthest the weights gets from the ceiling? $SPACE $SPACE \{ ans_rule(10) \} (include \{ htmlLink("javascript:unitspopup()","units") \})
$BR
$SPACE
$BR
e) What is the amplitdue of the graph of $SPACE \( d = f(t) \) $SPACE ?  $SPACE $SPACE \{ ans_rule(10) \} (do NOT include any units)
END_TEXT

ANS(radio_cmp($mc->correct_ans));
ANS( num_cmp( $b, 'units'=>'s') );
ANS( num_cmp( $m-$a, 'units'=>'cm') );
ANS( num_cmp( $m+$a, 'units'=>'cm' ) );
ANS( num_cmp( $a ) );

$min = $m-$a;
$max = $m+$a;

@reason = ("The weight's initial distance from the ceiling is $m cm which is its average distance from the ceiling.  Then the value of $BITALIC d $EITALIC begins to decrease to $min cm, which means it is getting closer to the ceiling (bouncing up).  Therefore none of the statements correctly describes the position of the weight represented in the given graph.",
"The weight's initial distance from the ceiling is at its greatest value $max cm.  Thus the weight starts at its furthest position from the ceiling, which is also its closest position to the floor.  It then begins to bounce back up towards the ceiling.",
"The weight's initial distance from the ceiling is at its smallest value $min cm.  Thus the weight starts at its closest position from the ceiling.  It then begins to head down away from the ceiling towards the floor.");


SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR 
$BBOLD  SOLUTION $EBOLD
$BR 
a) $reason[$perm[0]]
$BR $SPACE $BR
b) The period of the graph is $b, therefore it takes the weight $b seconds to go through one full oscillation and return to its starting position.
$BR $SPACE $BR
c) The weight gets as close as $min cm to the ceiling.
$BR $SPACE $BR
d) The falls as far as $max cm from the ceiling.
$BR $SPACE $BR
e) The amplitude of the graph is the distance of the maximum (or minimum) $BITALIC y $EITALIC value from the midline.  In this case the midline is $BITALIC d${EITALIC}=$m and the maximum value is $BITALIC d${EITALIC}=$max, so the amplitude is $a.
$BR
END_SOLUTION

ENDDOCUMENT(); 