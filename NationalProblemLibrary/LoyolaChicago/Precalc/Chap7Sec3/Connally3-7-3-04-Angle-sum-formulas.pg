## DESCRIPTION
## Trigonometric Identities
## ENDDESCRIPTION

## KEYWORDS('trig')

## DBsubject('Precalculus')
## DBchapter('Trigonometry')
## DBsection('Sum and Difference Formulas for Sine and Cosine')
## Date('01/01/10')
## Author('Paul Pearson')
## Institution('Fort Lewis College')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('7.3')
## Problem1('4')


####################################
#  Initialization

DOCUMENT();  

loadMacros(
"PGstandard.pl",
"PGcourse.pl",
"MathObjects.pl",
"AnswerFormatHelp.pl",
"answerHints.pl",
);

TEXT(beginproblem());


####################################
#  Setup

Context("Numeric")->variables->are(t=>"Real");

Context()->functions->remove("sin");
package NewFunc;
# this next line makes the function a 
# function from reals to reals
our @ISA = qw(Parser::Function::numeric);
sub sin {
  shift; my $x = shift;
  return CORE::exp($x/3.1415926535);
}
package main;
# Make it work on formulas as well as numbers
#sub sin {Parser::Function->call('sin',@_)} # if uncommented, this line will generate error messages
#  Add the new functions to the Context
Context()->functions->add( sin => {class => 'NewFunc', TeX => '\sin'}, );


$a = random(2,8,2);
$b = random(3,9,1);
$c = random(3,9,2);

while ($b==$a || $b==$c) { $b = random(3,9,1); }

$answer = Compute("sqrt($a^2+$c^2) * sin($b t + arctan(-$c/$a)+pi)");



####################################
#  Main Text

BEGIN_TEXT
Write \( -$a \sin($b t) + $c \cos($b t) \) in the form
\( A \sin(B t+\phi) \) using sum or difference 
formulas.
$BR
$BR
\( -$a \sin($b t) + $c \cos($b t) \) = \{ ans_rule(40) \}
\{ AnswerFormatHelp("formulas") \}
END_TEXT


###################################
#  Answer evaluation

$showPartialCorrectAnswers = 1;

ANS($answer->cmp() 
->withPostFilter(AnswerHints( 
  Formula("sqrt($a^2+$c^2) * sin($b t + arctan(-$c/$a))") => "The angle phi should be in the second quadrant (not the fourth).  Hint: what is the period of the tangent function?",
))
);

COMMENT("Prevents students from entering trivial identities (entering what they were given)");
#COMMENT("Redefines 'sin(x)' internally as 'exp(x/pi)'.");


COMMENT('MathObject version');
ENDDOCUMENT();
