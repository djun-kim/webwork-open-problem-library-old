# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Transformations of Functions and Their Graphs')
## DBsection('Vertical and Horizontal Shifts')
## KEYWORDS('transformations','shifts','translations','graph')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('5.1')
## Problem1('15')
## Author('Adam Spiegler and Paul Pearson')
## Institution('Loyola University Chicago and Fort Lewis College')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "PGgraphmacros.pl",
#           "extraAnswerEvaluators.pl",
#           "PGauxiliaryFunctions.pl",
"MathObjects.pl",
"AnswerFormatHelp.pl",
"PGcourse.pl",
"unionTables.pl",
           );
       
TEXT(beginproblem()); # standard preamble to each problem.

Context("Numeric")->variables->are(x=>"Real");

$k = random(3,9,1);
$a = random(10,15,1);
$a_b = 2*$a;
$a_c = $a**2;
$ans_a = "(1/$k) x^2 - ($a_b/$k) x + $a_c/$k";



$f[0] = "-1/2 x^2 for x in <-4,4> using color:blue and weight:2";
$graph[0] = init_graph(-4,-10,4,2,'axes'=>[0,0],size=>[200,200]);
$graph[0]->lb('reset');
$graph[0]->lb(new Label(3.8,-0.1,"x",'black','right','top'));
$graph[0]->lb(new Label(-0.1,1.8,"y",'black','right','top'));

$f[1] = "1/2 (x-1.5)^2 for x in <-2.5,5.5> using color:blue and weight:2";
$graph[1] = init_graph(-2.5,-2,5.5,10,'axes'=>[0,0],size=>[200,200]);
$graph[1]->lb('reset');
$graph[1]->lb(new Label(5.3,-0.1,"x",'black','right','top'));
$graph[1]->lb(new Label(-0.1,9.8,"y",'black','right','top'));
$graph[1]->lb(new Label(1.5,-.1,$a,'black','center','top'));


$f[2] = "1/2 (x+1.5)^2 for x in <-5.5,2.5> using color:blue and weight:2";
$graph[2] = init_graph(-5.5,-2,2.5,10,'axes'=>[0,0],size=>[200,200]);
$graph[2]->lb('reset');
$graph[2]->lb(new Label(2.3,-0.1,"x",'black','right','top'));
$graph[2]->lb(new Label(-0.1,9.8,"y",'black','right','top'));
$graph[2]->lb(new Label(-1.5,-.1,-$a,'black','center','top'));


$f[3] = "1/2 x^2 + 3 for x in <-4,4> using color:blue and weight:2";
$graph[3] = init_graph(-4,-2,4,10,'axes'=>[0,0],size=>[200,200]);
$graph[3]->lb('reset');
$graph[3]->lb(new Label(3.8,-0.1,"x",'black','right','top'));
$graph[3]->lb(new Label(-0.1,9.8,"y",'black','right','top'));
$graph[3]->lb(new Label(-0.1,3,$a,'black','center','top'));


$f[4] = "1/2 x^2 - 3 for x in <-4,4> using color:blue and weight:2";
$graph[4] = init_graph(-4,-5,4,6,'axes'=>[0,0],size=>[200,200]);
$graph[4]->lb('reset');
$graph[4]->lb(new Label(3.8,-0.1,"x",'black','right','top'));
$graph[4]->lb(new Label(-0.1,5.8,"y",'black','right','top'));
$graph[4]->lb(new Label(-0.1,-3,-$a,'black','center','top'));


for ($i = 0; $i <= 4; $i++) {
 plot_functions( $graph[$i], $f[$i]); 
 $fig[$i]=image(insertGraph($graph[$i]),width=>200,height=>200,tex_size=>310);
}

@perm = shuffle(5);
@fig = @fig[@perm];
@inv = invert(@perm);
@letter = ("A","B","C","D","E");
$correct = $letter[$inv[1]];

BEGIN_TEXT

Suppose \( f(x) = \frac{1}{$k} x^2 \).
$BR
$BR
(a) Find a formula for \( y = f(x - $a) \) in terms of the variable \( x \).
$BR
\( y = f(x - $a) = \) \{ ans_rule(20) \}
\{ AnswerFormatHelp("formulas") \}
$BR
$BR
(b) Sketch a graph of \( y = f(x-$a) \) on paper using graph transformations.
$BR
Select the letter of the graph A-E that matches your graph:
\{ pop_up_list(["?","A","B","C","D","E"]) \}
$BR
$BR
\{
BeginTable().
  AlignedRow([$fig[0],$fig[1],$fig[2]]).
  TableSpace(5,0).
  AlignedRow(["A","B","C"]).
  TableSpace(25,6).
  AlignedRow([$fig[3],$fig[4]," "]).
  TableSpace(5,0).
  AlignedRow(["D","E"," "]).
EndTable().
$BR.$BCENTER."(Click on a graph to enlarge it)".$ECENTER
\}

END_TEXT

install_problem_grader(~~&std_problem_grader);
$showPartialCorrectAnswers = 0;

ANS(Compute("$ans_a")->cmp() );
ANS(str_cmp($correct) );

# ANS(fun_cmp($ans_a,vars=>'x') );
# ANS(str_cmp($correct));

SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR 
$BBOLD  SOLUTION $EBOLD
$BR 
a) \( y = f(x - $a) = \frac{1}{$k} (x-$a)^2 \) $BR
\( \ \ \ \ \ = \frac{1}{$k} (x^2 - $a_b x + $a_c ) \) $BR
\( \ \ \ \ \ = \frac{1}{$k} x^2 - \frac{$a_b}{$k} x + \frac{$a_c}{$k} \)
$BR $SPACE $BR
b) To sketch, shift the graph of \( f(x)=\frac{1}{$k} x^2 \) to the right by $a
units, as in the figure below.
$BR $SPACE $BR
$BCENTER
$fig[$inv[1]]
$ECENTER
$BR
END_SOLUTION

      

COMMENT('MathObject version');
ENDDOCUMENT();
