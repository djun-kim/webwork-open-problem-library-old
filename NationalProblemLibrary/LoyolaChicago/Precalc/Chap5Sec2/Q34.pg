# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Transformations of Functions and Their Graphs')
## DBsection('Reflections and Symmetry')
## KEYWORDS('reflection','odd function','even function','symmetry')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('5.2')
## Problem1('32')
## Author('Adam Spiegler and Paul Pearson')
## Institution('Loyola University Chicago and Fort Lewis College')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
#           "PGgraphmacros.pl",
#           "extraAnswerEvaluators.pl",
#           "PGauxiliaryFunctions.pl",
"PGunion.pl",
"MathObjects.pl",
"contextLimitedPolynomial.pl",
"PGcourse.pl",
           );
       
TEXT(beginproblem()); # standard preamble to each problem.


$showPartialCorrectAnswers = 1;

$a = random(2,9,1);
$neg_a = -$a;
$b = non_zero_random(2,12,1);
$p1 = random(5,7,2);
$p2 = random(4,6,2);

$i = random(0,2,1);

if ($i == 0) {

  $g = Formula("$a x + x^2");
  $h = Formula("x - $b x^$p1");
  $G = Formula("-$a x + x^2");   # g(-x)
  $H = Formula("-x + $b x^$p1"); # h(-x)
  $eon = "Neither";
  $eon1 = "None of the above";

} elsif ($i == 1) {

  $g = Formula("$a x^$p2 + x^2");
  $h = Formula("x - $b x^$p1");
  $G = Formula("$a x^$p2 + x^2"); # g(-x)
  $H = Formula("-x + $b x^$p1");  # h(-x)
  $eon = "Odd";
  $eon1 = "\( -f(x) \)";

} else {

  $g = Formula("$a x^3 + x");
  $h = Formula("x^$p1 - $b x^3");
  $G = Formula("-$a x^3 - x");     # g(-x)
  $H = Formula("-x^$p1 + $b x^3"); # h(-x)
  $eon = "Even";
  $eon1 = "\( f(x) \)";

}

$mc1 = new_multiple_choice();
$mc1 ->qa("Reduce the fraction in part (a) further by factoring and cancellation, if possible.  Then for all \( x \), \( f(-x) = \)",$eon1);
$mc1 ->makeLast("\( f(x) \)","\( -f(x) \)","None of the above");

$mc2 = new_multiple_choice();
$mc2 ->qa("Is \(f\) an even function, an odd function, or neither even nor odd?",$eon);  
$mc2 ->makeLast("Even","Odd","Neither");


Context()->texStrings;

# 
#  Display the fraction and answer blanks nicely
#
if ($displayMode eq 'TeX') {
  $showfraction =
  "\[ f(-x) = ".ans_rule(10).ans_rule(10)." \]";
} else {
  $showfraction =
  ColumnTable(
  "\( \displaystyle f(-x) = \)",
  ans_rule(20).$BR.$HR.ans_rule(20),
  indent => 0, separation => 10, valign => "MIDDLE"
  );
}


Context()->texStrings;
BEGIN_TEXT
Suppose \( \displaystyle f(x) = \frac{g(x)}{h(x)} \), 
where \( g(x) = $g \) and \( h(x) = $h \).
$BR
$BR
(a) Find \( f(-x) \) by simplifying 
\( g(-x) \) and \( h(-x) \) as much as possible
and entering them in the numerator and
denominator below.
$showfraction
$BR
(b)   
\{ $mc1->print_q() \}
\{ $mc1->print_a() \}
$BR
(c)
\{ $mc2->print_q() \}
\{ $mc2->print_a() \}
END_TEXT
Context()->normalStrings;

$showPartialCorrectAnswers = 1;
install_problem_grader(~~&std_problem_grader);

ANS( $G->cmp() );
ANS( $H->cmp() );

ANS(radio_cmp($mc1->correct_ans));
ANS(radio_cmp($mc2->correct_ans));


@reason = (
"\( \displaystyle f(-x) = \frac{ $a (-x) + (-x)^2}{(-x)- $b (-x)^{$p1} } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $neg_a x + x^2}{-x + $b x^{$p1} } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $neg_a x + x^2}{-(x - $b x^{$p1}) } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = - \left( \frac{ $neg_a x + x^2}{x - $b x^{$p1} } \right) \)
$BR $SPACE $BR
Since \( f(-x) \) is not equal to either \( f(x) \) or \( -f(x) \), the function is neither odd nor even.",

"\( \displaystyle f(-x) = \frac{ $a (-x)^{$p2} + (-x)^2}{(-x)- $b (-x)^{$p1} } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $a x^{$p2} + x^2}{-x + $b x^{$p1} } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $a x^{$p2} + x^2}{-(x - $b x^{$p1}) } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = - \left( \frac{ $a x^{$p2} + x^2}{x - $b x^{$p1} } \right) \)
$BR $SPACE $BR
Since \( f(-x)  = - f(x) \) , $SPACE by definition the function is odd.",

"\( \displaystyle f(-x) = \frac{ $a (-x)^3 + (-x)}{(-x)^{$p1} - $b (-x)^3 } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $neg_a x^3 - x}{-x^{$p1} + $b x^3 } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ -($a x^{$p2} + x)}{-(x^{$p1} - $b x^3) } \) $BR $SPACE $BR
\( \displaystyle \ \ \ \ \ \ \ \ \ = \frac{ $a x^3 + x}{x^$p1 - $b x^3} \)
$BR $SPACE $BR
Since \( f(-x)  = f(x) \) , $SPACE by definition the function is even.");



SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR
$BBOLD SOLUTION $EBOLD
$BR
$reason[$i]
$BR
END_SOLUTION
      
ENDDOCUMENT();