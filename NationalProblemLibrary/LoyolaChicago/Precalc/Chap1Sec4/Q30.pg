## DESCRIPTION
## Problem from Functions Modeling Change, Connally, et al., 3rd ed.
## WeBWorK problem written by Adam Spiegler <aspiegler@luc.edu>
## ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Linear Functions and Change')
## DBsection('Formulas for Linear Functions')
## KEYWORDS('lines','linear functions','slope-intercept','point-slope form')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('1.4')
## Problem1('30')
## Author('Adam Spiegler')
## Institution('Loyola University Chicago')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "PGgraphmacros.pl",
           "PGauxiliaryFunctions.pl",
           "PGgraphmacros.pl"
           );
       
TEXT(beginproblem()); # standard preamble to each problem.


$showPartialCorrectAnswers = 1;

######################################################################
# we graph the function y = -0.5x + 9 and use labels to fudge.

$dy = 4;  ## change in y when dx =8
$y[1] = random(3,4,1);
$y[0] = $y[1]+$dy;
$y[2] = $y[1] - $dy*5/8;
$x[0] = 4;
$x[1] = 12;
$x[2] = 17;

$m = -$dy/8;
$b = $y[0] + $dy/2;
$ans = "$m q + $b";

################################################################
$graph = init_graph(-3,-1,20,8,'axes'=>[0,0],'ticks'=>[1,1]);
$graph->lb('reset');

$graph->lb(new Label(4,-.1,$x[0],'black','left','top'));
$graph->lb(new Label(11.5,-.1,$x[1],'black','left','top'));
$graph->lb(new Label(16.5,-.1,$x[2],'black','left','top'));
$graph->lb(new Label(-.35,0.5,$y[2],'black','right','middle'));
$graph->lb(new Label(-.35,3,$y[1],'black','right','middle'));
$graph->lb(new Label(-.35,7,$y[0],'black','right','middle'));

$graph->lb(new Label(19,-.75,"q, cups of tea drunk", 
                              'black','right','bottom'));
$graph->lb(new Label(-2.25,7.9,"s, hours of sleep obtained", 
                              'black','left','top'));


$f = "-0.5*x+9 for x in <3,17> using color:blue and weight:2";
$tick1 = ".5 for x in <-.15,.15> using color:black and weight:1";
$tick2 = "3 for x in <-.15,.15> using color:black and weight:1";
$tick3 = "7 for x in <-.15,.15> using color:black and weight:1";

$point[0] = closed_circle( 4,7, black );
$point[1] = closed_circle( 12,3, black );
$point[2] = closed_circle( 17,0.5, black );

$graph -> stamps(@point);
plot_functions( $graph, $f, $tick1, $tick2, $tick3);

###################################################

BEGIN_TEXT
Question 30:
$BR $SPACE $BR
Find a formula for the linear equation graphed below. You can enlarge the graph by clicking on it.
$BR
$BCENTER
\{  image(insertGraph($graph),width=>200,height=>200,'tex_size'=>700) \}
$BR
$BITALIC (click on the image to enlarge) $EITALIC
$ECENTER
$BR $SPAE $BR
\( s = f(q) = \) \{ ans_rule(20) \} 
END_TEXT
      
ANS(fun_cmp($ans,vars=>'q'));

SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR
$BBOLD SOLUTION $EBOLD
$BR
Since the function is linear, we can choose any two points (from the graph) to find its formula.  We use the form $BITALIC s = b + mq $EITALIC to get the hours of sleep obtained as a function of the number of cups of tea drunk.  We use the two points ($x[1], $y[1]) and ($x[2], $y[2]).  We begin by finding the slope
$BR
\[ m = \frac{ \triangle s}{\triangle q} = \frac{$y[2] - $y[1]}{$x[2] - $x[1]} = $m \]
$BR
Next, we substitute a point into our equation using our slope of $m hours of sleep per cup of tea drunk and solve for $BITALIC b${EITALIC}, the $BITALIC p${EITALIC}-intercept.  We use the point ( $x[1], $y[1]):
$BR $SPACE $BR
$SPACE $SPACE $SPACE $SPACE $SPACE \( $y[1] = b + $m \cdot $x[1] \)
$BR
$SPACE $SPACE $SPACE $SPACE $SPACE \( $b = b  \)
$BR $SPACE $BR
Therefore, $SPACE \( s = f(q) = $b + $m q \)
$BR
END_SOLUTION

ENDDOCUMENT();   # This should be the last executable line in the problem.