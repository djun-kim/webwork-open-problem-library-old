# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Transformations of Functions and Their Graphs')
## DBsection('Vertical Stretches and Compressions')
## KEYWORDS('reflection','compression','expansion','transformations')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('5.3')
## Problem1('14')
## Author('Adam Spiegler and Paul Pearson')
## Institution('Loyola University Chicago and Fort Lewis College')

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "PGgraphmacros.pl",
           "extraAnswerEvaluators.pl",
           "PGauxiliaryFunctions.pl",
"MathObjects.pl",
"parserVectorUtils.pl",
"unionTables.pl",
"AnswerFormatHelp.pl",
"PGcourse.pl",
           );
       
TEXT(beginproblem()); # standard preamble to each problem.

Context("Vector2D");

$f[0] = "x^2 for x in <-3,3> using color:blue and weight:2";
$f[1] = "-(x)^2 for x in <-3,3> using color:blue and weight:2";
$f[2] = "x^3 for x in <-3,3> using color:blue and weight:2";
$f[3] = "(x-1.5)^2 for x in <-3,3> using color:blue and weight:2";
$f[4] = "x^2-2 for x in <-3,3> using color:blue and weight:2";
$f[5] = $f[0];

for ($i = 0; $i <= 5; $i++){
$graph[$i] = init_graph(-3,-8,3,8,'axes'=>[0,0]);
$graph[$i]->lb('reset');
$graph[$i]->lb(new Label(2.8,-0.1,"x",'black','right','top'));
$graph[$i]->lb(new Label(-.1,7.8,"y",'black','right','top'))};
$point = closed_circle( -2,4, black );
$graph[5] -> stamps($point);
$graph[5]->lb(new Label(-1.8,4.2,"P=(-2, 4)",'black','left','bottom'));
for ($i = 0; $i <= 5; $i++) { plot_functions( $graph[$i], $f[$i]) }; 

$orig = image(insertGraph($graph[5]),width =>200,height =>200,tex_size =>310);

for ($i = 0; $i <= 4; $i++) {
  $fig[$i]=image(insertGraph($graph[$i]),width =>200,height =>200, tex_size =>310);
}

@perm = shuffle(5);
@inv = invert(@perm);
@fig = @fig[@perm];
@eqn = ("\( \ y = f(-x) \)", "\( \ y = -f(x) \)");
@letter = ("A", "B", "C", "D", "E");
$pick = random(0,1,1);
$correct = $letter[$inv[$pick]];
@ansx = (2,-2);
@ansy = (4,-4);


BEGIN_TEXT
Suppose \( f(x) = x^2 \) and \( P \) is the point \( (-2,4) \) on its graph.
$BR
$BR
(a) Where does the point \( P = (-2, 4) \) on the graph of 
\( y = f(x) = x^2 \) move to under the graph transformation $eqn[$pick]? 
Enter your answer as a point \( (a,b) \) including parentheses.
$BR
\{ ans_rule(10) \}
\{ AnswerFormatHelp("points") \}
$BR
$BR
(b) Without a calculator, sketch a graph of $eqn[$pick] and label at least
three points on your graph.  
$BR
Which of the graphs A-E matches your graph?
\{ pop_up_list(["?","A","B","C","D","E"]) \}  
$BR
$BR
\{
BeginTable().
  AlignedRow([$orig,$fig[0],$fig[1]]).
  TableSpace(5,0).
  AlignedRow(["\( f(x) = x^2 \)","A","B"]).
  TableSpace(25,6).
  AlignedRow([$fig[2],$fig[3],$fig[4]]).
  TableSpace(5,0).
  AlignedRow(["C","D","E"]).
EndTable().
$BR.$BCENTER."(Click on a graph to enlarge it)".$ECENTER
\}

END_TEXT


install_problem_grader(~~&std_problem_grader);
$showPartialCorrectAnswers = 0;

ANS( Point("($ansx[$pick],$ansy[$pick])")->cmp() );
ANS( str_cmp( $correct ));

#ANS( num_cmp( $ansx[$pick] ));
#ANS( num_cmp( $ansy[$pick] ));

@moved = ("x","y");
@axis = ("y","x");
@extra = ("Notice that reflecting the graph of \( \ f(x) \) about the $BITALIC y${EITALIC}-axis gives the same graph back.  This is because \( \ f(x) = x^2 \) is an even function, so it is symmetric about the $BITALIC y${EITALIC}-axis.",
"$SPACE");

SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR 
$BBOLD  SOLUTION $EBOLD
$BR
a) The transformation $eqn[$pick] is a reflection about the $BITALIC $axis[$pick]${EITALIC}-axis, which is sketched in graph $correct.  $extra[$pick] 
$BR $SPACE $BR
b) This transformation leaves the $BITALIC $axis[$pick]${EITALIC}-coordinate unchanged and reflects the $BITALIC $moved[$pick]${EITALIC}-coordinate to the other side of $BITALIC $axis[$pick]${EITALIC}-axis.  So we multiply the $BITALIC $moved[$pick]${EITALIC}-coordinate by -1, and the point on the new graph is ( $ansx[$pick] , $ansy[$pick] ).
$BR
END_SOLUTION


COMMENT('MathObject version');
ENDDOCUMENT();