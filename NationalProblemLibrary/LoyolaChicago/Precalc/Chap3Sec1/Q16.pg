# DESCRIPTION
# Problem from Functions Modeling Change, Connally et al., 3rd ed.
# WeBWorK problem written by Adam Spiegler, <aspiegler@luc.edu>
# ENDDESCRIPTION

## DBsubject('Precalculus')
## DBchapter('Exponential Functions')
## DBsection('Introduction to the Family of Exponential Functions')
## KEYWORDS('exponential functions','growth rate','growth factor')
## TitleText1('Functions Modeling Change')
## EditionText1('3')
## AuthorText1('Connally')
## Section1('3.1')
## Problem1('16')
## Author('Adam Spiegler and Paul Pearson')
## Institution('Loyola University Chicago and Fort Lewis College')


##################################
#  Initialization

DOCUMENT();       

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           "extraAnswerEvaluators.pl",
           );
       
TEXT(beginproblem()); 


#################################
#  Setup

$b[0] = random(1.03,1.09,.01);
$b[1] = random(1.13,1.18,.01);
$b[2] = random(0.8,0.9,.1);
$b[3] = random(1.183,1.197,.002);
$b[4] = random(0.71,0.79,.01);
$b[5] = random(0.91,0.99,.01);

$a[0] = random(900, 1300, 100);
$a[3] = random($a[0]+100, 1900, 100);
$a[4] = random(700, $a[0]-100, 100);
$a[5] = random($a[3]+100, 2300, 100);
$a[2] = random($a[5]+100, 2900, 100);
$a[1] = random(400, $a[4]-100, 100);

for($k = 0; $k <=5; $k++){ 
     $funct[$k] = "\( \displaystyle P = $a[$k]($b[$k])^t \)" };


@perm = shuffle(6);
@P = @funct[@perm];
@letters=("1","2","3","4","5","6");
@inverse = invert(@perm);
@ans = @letters[@inverse];


$q_grow = "$ans[0], $ans[1], $ans[3]";
$q_decay = "$ans[2], $ans[4], $ans[5]";
$q_fastest_grow = "$ans[3]";
$fast_grow_rate = ($b[$perm[$ans[3]-1]] - 1)*100;
$q_fastest_decay = "$ans[4]";
$fast_decay_rate = (1-$b[$perm[$ans[4]-1]])*100;
$large_pop = "$ans[2]";
$small_pop = "$ans[1]"; 


BEGIN_TEXT

The populations, $BITALIC P${EITALIC}, of six towns with time $BITALIC t $EITALIC in years are given by
$BR
$BCENTER
\{ begintable(2) \}
\{ row( "1", $P[0] ) \}
\{ row( "2", $P[1] ) \}
\{ row( "3", $P[2] ) \}
\{ row( "4", $P[3] ) \}
\{ row( "5", $P[4] ) \}
\{ row( "6", $P[5] ) \}
\{ endtable() \}
$ECENTER
$BR
$BR
Answer the following questions regarding the populations of the six towns above.  Whenever you need to enter several towns in one answer, enter your answer as a comma separated list of numbers.  For example if town $BITALIC 1${EITALIC}, town $BITALIC 2${EITALIC}, town $BITALIC 3${EITALIC}, and town $BITALIC 4${EITALIC}, are all growing you  could enter $BBOLD 1, 2, 3, 4 $EBOLD; or $BBOLD 2, 4, 1, 3 $EBOLD; or any other order of these four letters separated by commas.
$BR
$BR
(a) Which of the towns are growing?  \{ ans_rule(20) \}
$BR
$BR
(b) Which of the towns are shrinking?  \{ ans_rule(20) \}
$BR
$BR
(c) Which town is growing the fastest?  \{ ans_rule(5) \} 
$BR
What is the annual percentage growth RATE of that town? \{ ans_rule(10) \} $PERCENT
$BR
$BR
(d) Which town is shrinking the fastest?  \{ ans_rule(5) \} $BR
What is the annual percentage decay RATE of that town? \{ ans_rule(10) \} $PERCENT
$BR
$BR
(e) Which town has the largest initial population?  \{ ans_rule(20) \}
$BR
$BR
(f) Which town has the smallest initial population?  \{ ans_rule(20) \}

END_TEXT


$showPartialCorrectAnswers = 1;

ANS( number_list_cmp($q_grow)) ;
ANS( number_list_cmp($q_decay)) ;
ANS( number_list_cmp($q_fastest_grow)) ;
ANS( num_cmp($fast_grow_rate)) ;
ANS( number_list_cmp($q_fastest_decay)) ;
ANS( num_cmp($fast_decay_rate)) ;
ANS( number_list_cmp($large_pop)) ;
ANS( number_list_cmp($small_pop)) ;

$fast_grow_dec = $fast_grow_rate/100;
$fast_grow_fact = 1 + $fast_grow_dec;
$fast_decay_dec = $fast_decay_rate/100;
$fast_decay_fact = 1 - $fast_decay_dec;


SOLUTION(EV3(<<'END_SOLUTION'));
$BR $SPACE $BR 
$BBOLD  SOLUTION $EBOLD
$BR 

The formula \( f(t) = ab^t \) represents exponential growth if the base \( b > 1 \) and exponential decay if \( 0 < b < 1 \). Towns $q_grow are growing and towns $q_decay are shrinking.
$BR $SPACE $BR
Town $q_fastest_grow  is growing the fastest since its growth factor of $fast_grow_fact is the largest.  Since $fast_grow_fact - 1 = $fast_grow_dec, it is growing at a rate of $fast_grow_rate${PERCENT}.  Town $q_fastest_decay is shrinking the fastest since its decay factor of $fast_decay_fact is the smallest.  Since 1 - $fast_decay_fact = $fast_decay_dec, it is shrinking at a rate of $fast_decay_rate${PERCENT}.
$BR $SPACE $BR
In the exponential function \( f(t) = ab^t \), the parameter $BITALIC a $EITALIC gives the value of the function when $BITALIC t $EITALIC = 0.  We see that town $large_pop has the largest initial population ($a[2]) and town $small_pop has the smallest initial population ($a[1]).
$BR

END_SOLUTION

      
ENDDOCUMENT();   # This should be the last executable line in the problem.