## DESCRIPTION
##   Continuity Graphically
## ENDDESCRIPTION

## KEYWORDS('graphical', 'continuity','calculus', 'limits')
## Tagged by nhamblet

## DBsubject('Calculus')
## DBchapter('Limits and Derivatives')
## DBsection('Continuity')
## Date('')
## Author('')
## Institution('')
## TitleText1('Calculus: Early Transcendentals')
## EditionText1('6')
## AuthorText1('Stewart')
## Section1('2.3')
## Problem1('3')
## TitleText2('Calculus: Early Transcendentals')
## EditionText2('1')
## AuthorText2('Rogawski')
## Section2('2.2')
## Problem2('37')

DOCUMENT();

loadMacros("PG.pl",
           "PGbasicmacros.pl",
           "PGchoicemacros.pl",
           "PGanswermacros.pl",
           'PGgraphmacros.pl',
           "PGnumericalmacros.pl",
           ); 


# define function1 to be evaluated

@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,3,0,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f1 = $herm -> rf_f;

@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,-3, -2,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f2 = $herm -> rf_f;

# define function3 to be evaluated
@x_arr = (-5,-3,0,3,5);
@y_arr = (1,-2,0,0,-1,);
@yp_arr = (-1,0,-1,1,-1,);

$herm = new Hermite(~~@x_arr, ~~@y_arr, ~~@yp_arr);
$f3 = $herm -> rf_f;

$llimit = -5; $rlimit = 5;
$del = .25;
$x0=random($llimit+$del,$rlimit-$del , .2);

#  Calculate the cubic spline approximation

$graph = init_graph($llimit, $llimit, $rlimit, $rlimit,axes => [0,0],grid =>[10,10]);
my ($left_rule, $value_rule, $right_rule) = ($f1, $f2,$f3)[NchooseK(3,3)];

## Randomize what type of problem we will have, and make the graph
## clear.

$value       = &$value_rule($x0)  ; 

$type = random(1,4);
$cancontin = 0;
$iscontin = 0;
if(abs(&$left_rule($x0)- &$right_rule($x0))< 0.3) {
  $left_rule = $right_rule;
  $cancontin = 1;
  if($type < 2 || abs(&$left_rule($x0)- $value)< 0.2) {
      $value = &$left_rule($x0);
      $iscontin = 1;
      $cancontin = 0;
  }
}

if($type == 1) { # all different if clear
  $value = &$left_rule($x0);
} elsif($type == 2) {
  $value= &$right_rule($x0);
}


my ($left_fun) = new Fun($left_rule, $graph);
$left_fun ->domain($llimit, $x0);
$left_fun ->color('red');


my ($right_fun) = new Fun($right_rule, $graph);
$right_fun ->domain($rlimit, $x0);
$right_fun ->color('red');

$graph->stamps(open_circle($x0, $left_fun->rule->($x0), 'red') );
$graph->stamps(open_circle($x0, $right_fun->rule->($x0), 'red') );
# the closed circle needs to printed last.
$graph->stamps( closed_circle($x0 , $value, 'red' )  ) ;
$left_limit  = $left_fun->rule->($x0);
$right_limit = $right_fun->rule->($x0);


TEXT(beginproblem());


BEGIN_TEXT
Let \(f\) be the function below.
$BR$BR
\{ image(insertGraph($graph) ) \}
$BR
$BBOLD Note: $EBOLD you can click on the graph to get a larger image.

$BR$BR
Determine the limits for the function \( f\) at  $x0.
$BR$BR
\( \displaystyle \lim_{x\to $x0^{-} } f(x) \) = \{ans_rule(10)\}
$BR
$BR
\( f($x0) \)   = \{ ans_rule(10) \}
$BR
$BR
\( \displaystyle \lim_{x\to $x0^{+}  } f(x) \) = \{ ans_rule(10) \}
$BR
$BR
Is this function continuous at $x0?: \{ pop_up_list(['?', 'Yes', 'No']) \}
$BR
$BR
Can one change the value of this function at $x0 to some value other
than its current value at $x0, and have the function be continuous
at $x0?: \{ pop_up_list(['?', 'Yes', 'No']) \}
END_TEXT

$continuousQ = 'No';
$continuousQ = 'Yes' if $iscontin;
$madeContinuousQ = 'No';
$madeContinuousQ = 'Yes' if $cancontin;

$answer_tol = 0.15;
ANS(num_cmp($left_limit, tolType=>'absolute', tol => $answer_tol ));
ANS(num_cmp($value, tolType=>'absolute', tol => $answer_tol ));
ANS(num_cmp($right_limit, tolType=>'absolute', tol => $answer_tol ));

ANS(str_cmp($continuousQ, filters=>['trim_whitespace', 'compress_whitespace']));
ANS(str_cmp($madeContinuousQ, filters=>['trim_whitespace', 'compress_whitespace']));



			
ENDDOCUMENT();

