# DESCRIPTION
# Problem from Calculus, single variable, Hughes-Hallett et al., 4th ed.
# WeBWorK problem written by Gavin LaRose, <glarose@umich.edu>
# ENDDESCRIPTION

## KEYWORDS('calculus', 'integral', 'sequences')
## Tagged by glr 02/08/09

## DBsubject('Calculus')
## DBchapter('Infinite Sequences and Series')
## DBsection('Sequences')
## Date('')
## Author('Gavin LaRose')
## Institution('University of Michigan')
## TitleText1('Calculus')
## EditionText1('4')
## AuthorText1('Hughes-Hallett')
## Section1('9.1')
## Problem1('17')

## Textbook tags
## HHChapter('Sequences and Series')
## HHSection('Sequences')

DOCUMENT();
loadMacros(
"PG.pl",
"PGbasicmacros.pl",
"PGchoicemacros.pl",
"PGanswermacros.pl",
"PGauxiliaryFunctions.pl",
"PGgraphmacros.pl",
"hhAdditionalMacros.pl",
);

Context("Numeric");

TEXT(beginproblem());
$showPartialCorrectAnswers = 1;

$a = random(1,4,1);
$b = random(1,4,1);

# four sequences
@seq = ();
$seq[0] = "s_n = $a - $b/n";
$seq[1] = "s_n = $a + (-1)^n/n";
$seq[2] = "s_n = $a/n";
$seq[3] = "s_n = $a + $b/n";

# make graphs for each
@gra = ();
for ( my $i=0; $i<4; $i++ ) {
    $gra[$i] = init_graph(-1,-1,10,($a+$b),'axes'=>[0,0],'grid'=>[1,1]);
    for ( my $j=1; $j<11; $j++ ) {
	$gra[$i]->stamps(closed_circle($j, sn($i, $j), 'blue') );
    }
}

# make a matching list
$grmatch = new_match_list();
$grmatch->qa( 
    "\($seq[0]\)", image(insertGraph($gra[0]),'tex_size'=>300),
    "\($seq[1]\)", image(insertGraph($gra[1]),'tex_size'=>300),
    "\($seq[2]\)", image(insertGraph($gra[2]),'tex_size'=>300),
    "\($seq[3]\)", image(insertGraph($gra[3]),'tex_size'=>300),
);
$grmatch->choose(4);

# handy routine for generating sequence values
sub sn { 
    my ( $snum, $nval ) = @_;
    if ( $snum == 0 )    { return( $a - $b/$nval ); }
    elsif ( $snum == 1 ) { return( $a + ((-1)**$nval)/$nval ); }
    elsif ( $snum == 2 ) { return( $a/$nval ); }
    elsif ( $snum == 3 ) { return( $a + $b/$nval ); }
    else { return(1); } # shouldn't ever happen; bail out
}

Context()->texStrings;
BEGIN_TEXT

Match the graphs with the corresponding formulas.  (Click on any graph
for a larger version.)

\{ $grmatch->print_q() \}
\{ $grmatch->print_a() \}

END_TEXT
Context()->normalStrings;

ANS(str_cmp($grmatch->ra_correct_ans));

$a0 = $grmatch->ra_correct_ans->[0];
$a1 = $grmatch->ra_correct_ans->[1];
$a2 = $grmatch->ra_correct_ans->[2];
$a3 = $grmatch->ra_correct_ans->[3];

Context()->texStrings;
SOLUTION(EV3(<<'END_SOLUTION'));
$PAR SOLUTION $PAR

The formulas match as follows: 
1 matches graph $a0, 
2 matches graph $a1, 
3 matches graph $a2, and
4 matches graph $a3.

END_SOLUTION
Context()->normalStrings;

ENDDOCUMENT();
